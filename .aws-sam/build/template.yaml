AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: 'Sample rust application for Lambda

  '
Parameters:
  Test:
    Type: String
  AwsS3Bucket:
    Type: String
Resources:
  ProjectS3Bucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName:
        Ref: AwsS3Bucket
  HelloRustFunction:
    Type: AWS::Serverless::Function
    Properties:
      FunctionName: HelloRust
      Role: arn:aws:iam::428694349470:role/role-lambdaexec
      MemorySize: 512
      CodeUri: HelloRustFunction
      PackageType: Zip
      Runtime: provided.al2
      Handler: bootstrap.is.real.handler
    Metadata:
      BuildMethod: makefile
  StockRustFunction:
    Type: AWS::Serverless::Function
    Properties:
      FunctionName: StockRust
      Role: arn:aws:iam::428694349470:role/role-lambdaexec
      MemorySize: 512
      CodeUri: StockRustFunction
      PackageType: Zip
      Runtime: provided.al2
      Handler: bootstrap.is.real.handler
      Environment:
        Variables:
          TEST:
            Ref: Test
          AWS_S3_BUCKET:
            Ref: AwsS3Bucket
      Events:
        CWSchedule:
          Type: Schedule
          Properties:
            Schedule: cron(0 15 * * ? *)
            Name: GetStockChartDailySchedule
            Description: get daily stockchart schedule
            Input:
              Fn::Sub: "{\n    \"ticker\": \"$NIKK\"\n}\n"
            Enabled: false
    Metadata:
      BuildMethod: makefile
